/**
* @file
* @author
* @date
* @brief
* @see
*/

/*****************************************************************************
 * Headers
 *****************************************************************************/
#include "stdint.h"
#include "stdbool.h"
#include "stddef.h"
#include "stdio.h"
#include "stdlib.h"
#include "memio.h"
#include "armv7ar.h"
#include "event.h"


/*****************************************************************************
 * Macro definitions
 *****************************************************************************/
/*****************************************************************************
 * Type definitions
 *****************************************************************************/
/*****************************************************************************
 * Enumerations
 *****************************************************************************/

/*****************************************************************************
 * Static variables
 *****************************************************************************/
/* ---------------------------------------------------------------------------
   - Variable
 --------------------------------------------------------------------------- */
static uint32_t s_event_flag;

/* ---------------------------------------------------------------------------
   - Function
 --------------------------------------------------------------------------- */
/*****************************************************************************
 * Extern variables
 *****************************************************************************/
/* ---------------------------------------------------------------------------
   - Variable
 --------------------------------------------------------------------------- */
/* ---------------------------------------------------------------------------
   - Function
 --------------------------------------------------------------------------- */
/*****************************************************************************
 * Global variables
 *****************************************************************************/
/*****************************************************************************
 * Function prototypes
 *****************************************************************************/
void kernel_event_flag_init( void )
{
    s_event_flag = 0;
}

void kernel_event_flag_set( kernel_event_flag_t event )
{
    s_event_flag |= ( uint32_t )event;
}

void kernel_event_flag_clear( kernel_event_flag_t event )
{
    s_event_flag &= ~(( uint32_t )event );
}

bool kernel_event_flag_check( kernel_event_flag_t event )
{
    if ( s_event_flag & ( uint32_t )event ) {
        debug_printf( "[DBG] check 0x%x ( 0x%x )\n", s_event_flag, event );
        kernel_event_flag_clear( event );
        debug_printf( "[DBG] clear 0x%x\n", s_event_flag );

        return true;
    }

    return false;
}
